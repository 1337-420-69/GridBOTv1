// -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------//
// -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------//

const fs = require("fs");
const axios = require("axios");
const crypto = require("crypto");

var { param_symbol } = require("./json_param_input.json")

// -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------//

const { api_key, secret } = require("./json_config.json")

// -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------//

var line = "--------------------------------------------------------------------------------";
var line2 = "- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -";
var line3 = "________________________________________________________________________________";

// -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------//

function contaBinanceCancelOpenOrders(symbol){
	var burl = "https://fapi.binance.com";
	var end_point = "/fapi/v1/allOpenOrders";
	var data_query_string = `symbol=${symbol}&timestamp=` + Date.now();
	var signature = crypto.createHmac('sha256', secret).update(data_query_string).digest('hex');
	var axiosConfig = {headers: {"X-MBX-APIKEY": api_key}};
	var postData;
	return axios.delete(`${burl}${end_point}?${data_query_string}&signature=${signature}`, axiosConfig);
};


// -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------//

function autoWriteOrdersList(content) {
	fs.writeFile("./json_order_list.json", content, (err) => {
		if (err)
			throw err;
		console.log('The file has been saved!');
	});
};

// -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------//

console.log(" ");
console.log(line);

// -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------//
// GET MARKET PRICE

market_data = contaBinanceCancelOpenOrders(param_symbol);
market_data.then(function(value){

	console.log(value.data);

});

// -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------//
// -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------//
// -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------//